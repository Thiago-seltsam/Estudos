<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ItensOffshore Senai2026</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: 'Inter', sans-serif;
  min-height: 100vh;
  background: linear-gradient(135deg, #667eea, #764ba2);
  background-size: 400% 400%;
  animation: gradientMove 12s ease infinite;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 60px 20px;
}

@keyframes gradientMove {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.wrapper {
  width: 100%;
  max-width: 1000px;
  display: flex;
  flex-direction: column;
  gap: 30px;
}

/* CARD PRINCIPAL */
.card {
  background: rgba(255,255,255,0.9);
  backdrop-filter: blur(10px);
  padding: 35px;
  border-radius: 16px;
  box-shadow: 0 20px 40px rgba(0,0,0,.15);
  text-align: center;
  animation: fadeUp 0.6s ease;
}

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.card h2 {
  font-size: 28px;
  margin-bottom: 10px;
  color: #222;
}

.card-options {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 18px;
  margin-top: 25px;
}

.card-options button {
  padding: 18px;
  border-radius: 14px;
  border: none;
  font-size: 16px;
  font-weight: 700;
  color: #fff;
  cursor: pointer;
  transition: all .25s ease;
  position: relative;
  overflow: hidden;
}

.card-options button::after {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(255,255,255,.2);
  opacity: 0;
  transition: opacity .3s;
}

.card-options button:hover::after {
  opacity: 1;
}

.card-options button:hover {
  transform: translateY(-6px) scale(1.05);
  box-shadow: 0 15px 30px rgba(0,0,0,.25);
}

.buscar { background: linear-gradient(135deg,#5b7cfa,#4a63d8); }
.registrar { background: linear-gradient(135deg,#2ecc71,#27ae60); }
.atualizar { background: linear-gradient(135deg,#f1c40f,#f39c12); color:#222; }
.deletar { background: linear-gradient(135deg,#e74c3c,#c0392b); }

/* P√ÅGINAS */
.page {
  display: none;
  background: rgba(255,255,255,0.95);
  padding: 30px;
  border-radius: 16px;
  box-shadow: 0 15px 35px rgba(0,0,0,.15);
  animation: fadeUp .5s ease;
}

.page h3 {
  margin-bottom: 15px;
  font-size: 22px;
}

/* INPUTS */
input {
  width: 100%;
  padding: 12px;
  margin: 6px 0;
  border-radius: 10px;
  border: 1px solid #ccc;
  font-size: 15px;
  transition: all .2s;
}

input:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102,126,234,.2);
}

/* BOT√ïES INTERNOS */
.page button {
  margin-top: 10px;
  padding: 12px 18px;
  border-radius: 10px;
  border: none;
  font-weight: 600;
  cursor: pointer;
  transition: all .2s;
}

.page button:hover {
  transform: translateY(-2px);
}

/* TABELA */
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
  border-radius: 10px;
  overflow: hidden;
}

th {
  background: #667eea;
  color: #fff;
  padding: 10px;
}

td {
  padding: 10px;
  border-bottom: 1px solid #eee;
}

tr:hover {
  background: #f5f7ff;
}

.centered-table {
  overflow-x: auto;
}

pre {
  background: #f4f6ff;
  padding: 12px;
  border-radius: 10px;
  margin-top: 10px;
  font-size: 13px;
}
</style>
</head>

<body>
<div class="wrapper">

  <!-- CARD PRINCIPAL -->
  <div class="card">
    <h2>Sistema de Itens Offshore</h2>
    <div class="card-options">
      <button class="buscar" onclick="abrirPagina('get')">üîç Buscar</button>
      <button class="registrar" onclick="abrirPagina('post')">‚ûï Registrar</button>
      <button class="atualizar" onclick="abrirPagina('patch')">‚úèÔ∏è Atualizar</button>
      <button class="deletar" onclick="abrirPagina('delete')">üóëÔ∏è Deletar</button>
    </div>
  </div>

  <!-- GET -->
  <div class="page" id="get">
    <h3>Itens Cadastrados</h3>
    <button onclick="get()">Atualizar tabela</button>
    <div id="resultadoGet" class="centered-table"></div>
    <button onclick="fecharPagina('get')">Voltar</button>
  </div>

  <!-- POST -->
  <div class="page" id="post">
    <h3>Registrar Item</h3>
    <input id="pid" type="number" placeholder="ID (opcional)">
    <input id="pc" placeholder="Categoria">
    <input id="pn" placeholder="Nome">
    <input id="pf" placeholder="Fornecedor">
    <input id="pl" placeholder="Local">
    <input id="pe" type="number" placeholder="Estoque">
    <button onclick="postItem()">Salvar</button>
    <pre id="resultadoPost"></pre>
    <button onclick="fecharPagina('post')">Voltar</button>
  </div>

  <!-- PATCH -->
  <div class="page" id="patch">
    <h3>Atualizar Item</h3>
    <input id="pid2" type="number" placeholder="ID">
    <input id="pn2" placeholder="Novo nome">
    <input id="pf2" placeholder="Novo fornecedor">
    <input id="pl2" placeholder="Novo local">
    <input id="pe2" type="number" placeholder="Novo estoque">
    <button onclick="patchItem()">Atualizar</button>
    <pre id="resultadoPatch"></pre>
    <button onclick="fecharPagina('patch')">Voltar</button>
  </div>

  <!-- DELETE -->
  <div class="page" id="delete">
    <h3>Deletar Item</h3>
    <input id="did" type="number" placeholder="ID do item">
    <button class="deletar" onclick="deletarItem()">Deletar</button>
    <pre id="resultadoDelete"></pre>
    <button onclick="fecharPagina('delete')">Voltar</button>
  </div>

</div>

<script>
const URL = "https://luabfnznxvgecovukmpd.supabase.co/rest/v1/ItensOffshore";
const headers = {
  apikey: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx1YWJmbnpueHZnZWNvdnVrbXBkIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NDI3ODUzOSwiZXhwIjoyMDc5ODU0NTM5fQ.vFJ7kmVk6mQsiuGv9MOLSUCOS_8XrOBaWUcH6Kn4yG0"
};

const pages = {
  get: document.getElementById('get'),
  post: document.getElementById('post'),
  patch: document.getElementById('patch'),
  delete: document.getElementById('delete')
};

function abrirPagina(id){
  Object.values(pages).forEach(p=>p.style.display='none');
  pages[id].style.display='block';
}

function fecharPagina(id){
  pages[id].style.display='none';
}

/* GET */
function get(){
  const container = document.getElementById("resultadoGet");
  container.innerHTML = "Carregando...";
  fetch(URL+"?select=*", { headers })
    .then(r=>r.json())
    .then(data=>{
      if(!data.length){ container.innerHTML="Nenhum item encontrado"; return; }
      data.sort((a,b)=>a.id-b.id);
      let html='<table><tr><th>ID</th><th>Categoria</th><th>Nome</th><th>Fornecedor</th><th>Local</th><th>Estoque</th></tr>';
      data.forEach(i=>{
        html+=`<tr>
          <td>${i.id}</td>
          <td>${i.Categoria||'-'}</td>
          <td>${i.Nome||'-'}</td>
          <td>${i.Fornecedor||'-'}</td>
          <td>${i.Local||'-'}</td>
          <td>${i.Estoque||0}</td>
        </tr>`;
      });
      html+='</table>';
      container.innerHTML=html;
    });
}

/* POST */
function postItem(){
  const dados = {
    Categoria: pc.value.trim(),
    Nome: pn.value.trim(),
    Fornecedor: pf.value.trim(),
    Local: pl.value.trim(),
    Estoque: Number(pe.value)
  };
  if(pid.value) dados.id = Number(pid.value);

  fetch(URL,{
    method:"POST",
    headers:{...headers,"Content-Type":"application/json",Prefer:"return=representation"},
    body:JSON.stringify(dados)
  })
  .then(r=>r.json())
  .then(d=>{ resultadoPost.textContent="Item cadastrado"; get(); });
}

/* PATCH */
function patchItem(){
  const dados = {};
  if(pn2.value) dados.Nome=pn2.value;
  if(pf2.value) dados.Fornecedor=pf2.value;
  if(pl2.value) dados.Local=pl2.value;
  if(pe2.value) dados.Estoque=Number(pe2.value);

  fetch(URL+"?id=eq."+pid2.value,{
    method:"PATCH",
    headers:{...headers,"Content-Type":"application/json",Prefer:"return=representation"},
    body:JSON.stringify(dados)
  })
  .then(r=>r.json())
  .then(()=>{ resultadoPatch.textContent="Item atualizado"; get(); });
}

/* DELETE */
function deletarItem(){
  fetch(URL+"?id=eq."+did.value,{method:"DELETE",headers})
    .then(()=>{ resultadoDelete.textContent="Item deletado"; get(); });
}

get();
</script>
</body>
</html>